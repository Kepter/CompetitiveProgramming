#include <bits/stdc++.h>
using namespace std;

struct min_queue
{
	deque<int> regq;
	deque<int> minq;

	min_queue() : regq(), minq() {}

	void push(int x)
	{
		regq.push_back(x);

		while(!minq.empty() && minq.back() > x) minq.pop_back();
		minq.push_back(x);
	}

	void pop()
	{
		int popped = regq.front();
		regq.pop_front();
		if(popped == minq.front()) minq.pop_front();
	}

	int min()
	{
		if(regq.empty()) return 1e9;
		return minq.front();
	}

	void clear()
	{
		regq.clear();
		minq.clear();
	}

	int size()
	{
		return regq.size();
	}
};

void print(vector<vector<int>> cost)
{
	for(int i=0; i<cost.size(); i++)
	{
		for(int j=0; j<cost[i].size(); j++)
			printf(" %10d ", cost[i][j]);
		cout << endl;
	}
}

int main()
{
	int size, jmp; cin >> size >> jmp;

	vector<vector<int>> cost(size, vector<int>(size, 1e9));
	cost[0][0] = 0;

	min_queue rowq;
	vector<min_queue> colq(size, min_queue());


	for(int r=0; r<size; r++)
	{
		string ln; cin >> ln;
		for(int c=0; c<size; c++)
		{
			if(rowq.size() > jmp) rowq.pop();
			if(colq[c].size() > jmp) colq[c].pop();

			if(ln[c] == '.')
			{
				cost[r][c] = min(cost[r][c], rowq.min()+1);
				cost[r][c] = min(cost[r][c], colq[c].min()+1);
			}

			rowq.push(cost[r][c]);
			colq[c].push(cost[r][c]);
		}
		rowq.clear();

//		cout << "LINE " << r << ": --------" << endl;
//		print(cost);
//		cout << endl << endl;
	}

	int out = cost[size-1][size-1];
	if(out == 1e9) out = -1;
	cout << out << endl;

	return 0;
}

/*
100 10
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................


20 4
....................
....................
....................
....................
....................
....................
....................
....................
....................
....................
....................
....................
....................
....................
....................
....................
....................
....................
....................
....................

4 2
.###
#...
.#..
#.#.

*/

